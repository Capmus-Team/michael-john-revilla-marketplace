"use strict";exports.id=45,exports.ids=[45],exports.modules={10403:(e,l,s)=>{s.d(l,{J:()=>n});var r=s(60687),a=s(43210),i=s(14163),t=a.forwardRef((e,l)=>(0,r.jsx)(i.sG.label,{...e,ref:l,onMouseDown:l=>{l.target.closest("button, input, select, textarea")||(e.onMouseDown?.(l),!l.defaultPrevented&&l.detail>1&&l.preventDefault())}}));t.displayName="Label";var d=s(24224),c=s(96241);let o=(0,d.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),n=a.forwardRef(({className:e,...l},s)=>(0,r.jsx)(t,{ref:s,className:(0,c.cn)(o(),e),...l}));n.displayName=t.displayName},15616:(e,l,s)=>{s.d(l,{T:()=>t});var r=s(60687),a=s(43210),i=s(96241);let t=a.forwardRef(({className:e,...l},s)=>(0,r.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:s,...l}));t.displayName="Textarea"},41045:(e,l,s)=>{s.d(l,{H:()=>p});var r=s(60687),a=s(43210),i=s(24934),t=s(68988),d=s(15616),c=s(10403),o=s(63974),n=s(55192),m=s(11501),x=s(16396),h=s(30474);function p({onSuccess:e}){let[l,s]=(0,a.useState)({title:"",description:"",price:"",category:"",sellerEmail:"",sellerName:"",imageUrl:""}),[p,u]=(0,a.useState)(!1),[g,j]=(0,a.useState)(null),[v,b]=(0,a.useState)(""),f=async e=>{let l=e.name.split(".").pop(),s=`${Math.random()}.${l}`,r=`listings/${s}`,{error:a}=await x.N.storage.from("images").upload(r,e);if(a)throw a;let{data:i}=x.N.storage.from("images").getPublicUrl(r);return i.publicUrl},N=async s=>{s.preventDefault(),u(!0);try{let s=l.imageUrl;g&&(s=await f(g));let{error:r}=await x.N.from("listings").insert({title:l.title,description:l.description,price:Number.parseFloat(l.price),category:l.category,seller_email:l.sellerEmail,seller_name:l.sellerName,image_url:s||"/placeholder.svg?height=300&width=300"});if(r)throw r;e()}catch(e){console.error("Error creating listing:",e),alert("Failed to create listing. Please try again.")}finally{u(!1)}};return(0,r.jsx)("div",{className:"max-w-6xl mx-auto",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-8",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-8",children:"Create Your Listing"}),(0,r.jsxs)("div",{className:"grid lg:grid-cols-3 gap-8",children:[(0,r.jsxs)("div",{className:"lg:col-span-1 space-y-6",children:[(0,r.jsx)(n.Zp,{children:(0,r.jsxs)(n.Wu,{className:"p-6",children:[(0,r.jsx)(c.J,{htmlFor:"image",className:"block mb-4",children:"Add photos"}),(0,r.jsx)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:v?(0,r.jsx)("div",{className:"relative aspect-square",children:(0,r.jsx)(h.default,{src:v||"/placeholder.svg",alt:"Preview",fill:!0,className:"object-cover rounded"})}):(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-500 mb-4",children:"Add photos"}),(0,r.jsx)(t.p,{id:"image",type:"file",accept:"image/*",onChange:e=>{let l=e.target.files?.[0];if(l){j(l);let e=new FileReader;e.onload=()=>{b(e.result)},e.readAsDataURL(l)}},className:"max-w-xs"})]})})]})}),(0,r.jsxs)("form",{onSubmit:N,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(c.J,{htmlFor:"title",children:"Title"}),(0,r.jsx)(t.p,{id:"title",value:l.title,onChange:e=>s({...l,title:e.target.value}),required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(c.J,{htmlFor:"price",children:"Price"}),(0,r.jsx)(t.p,{id:"price",type:"number",step:"0.01",value:l.price,onChange:e=>s({...l,price:e.target.value}),required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(c.J,{htmlFor:"category",children:"Category"}),(0,r.jsxs)(o.l6,{onValueChange:e=>s({...l,category:e}),children:[(0,r.jsx)(o.bq,{children:(0,r.jsx)(o.yv,{placeholder:"Select category"})}),(0,r.jsx)(o.gC,{children:m.R.map(e=>(0,r.jsx)(o.eb,{value:e,children:e},e))})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(c.J,{htmlFor:"sellerName",children:"Your Name"}),(0,r.jsx)(t.p,{id:"sellerName",value:l.sellerName,onChange:e=>s({...l,sellerName:e.target.value}),required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(c.J,{htmlFor:"sellerEmail",children:"Email"}),(0,r.jsx)(t.p,{id:"sellerEmail",type:"email",value:l.sellerEmail,onChange:e=>s({...l,sellerEmail:e.target.value}),required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(c.J,{htmlFor:"description",children:"Description"}),(0,r.jsx)(d.T,{id:"description",value:l.description,onChange:e=>s({...l,description:e.target.value}),rows:4})]}),(0,r.jsx)(i.$,{type:"submit",disabled:p,className:"w-full",children:p?"Creating...":"Next"})]})]}),(0,r.jsx)("div",{className:"lg:col-span-1",children:(0,r.jsx)(n.Zp,{children:(0,r.jsxs)(n.Wu,{className:"p-6",children:[(0,r.jsx)("h3",{className:"font-bold text-lg mb-4",children:"Preview"}),(0,r.jsx)("div",{className:"aspect-square bg-blue-100 rounded-lg mb-4 relative overflow-hidden",children:v?(0,r.jsx)(h.default,{src:v||"/placeholder.svg",alt:"Preview",fill:!0,className:"object-cover"}):(0,r.jsx)("div",{className:"w-full h-full bg-gradient-to-br from-blue-200 to-blue-300 opacity-50"})})]})})}),(0,r.jsx)("div",{className:"lg:col-span-1",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-bold text-xl",children:l.title||"Title"}),(0,r.jsx)("p",{className:"font-bold text-lg",children:l.price?`$${l.price}`:"Price"})]}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Listed 1 hour ago",(0,r.jsx)("br",{}),"in Palo Alto, CA"]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-semibold",children:"Seller Information"}),(0,r.jsx)("p",{children:l.sellerName||"Seller Name"})]})]})})]})]})})}}};