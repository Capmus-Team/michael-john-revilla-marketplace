(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1007:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(9946).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},1469:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return o},getImageProps:function(){return n}});let a=r(8229),s=r(1264),i=r(3063),l=a._(r(1193));function n(e){let{props:t}=(0,s.getImgProps)(e,{defaultLoader:l.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let o=i.Image},3072:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>y});var a=r(5155),s=r(2115),i=r(9464),l=r(3291),n=r(3999);function o(e){let{selectedCategory:t,onCategoryChange:r}=e;return(0,a.jsxs)("div",{className:"w-64 bg-gray-50 p-4 rounded-lg",children:[(0,a.jsx)("h2",{className:"font-bold text-lg mb-4",children:"Categories"}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("button",{onClick:()=>r(null),className:(0,n.cn)("w-full text-left px-3 py-2 rounded hover:bg-gray-200 transition-colors",null===t&&"bg-blue-100 text-blue-700 font-medium"),children:"All Categories"}),l.R.map(e=>(0,a.jsx)("button",{onClick:()=>r(e),className:(0,n.cn)("w-full text-left px-3 py-2 rounded hover:bg-gray-200 transition-colors",t===e&&"bg-blue-100 text-blue-700 font-medium"),children:e},e))]})]})}var c=r(3156);function d(e){let{listings:t,selectedCategory:r}=e,s=r?t.filter(e=>e.category===r):t;return(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:r||"All Categories"}),(0,a.jsxs)("p",{className:"text-gray-600",children:[s.length," items"]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:s.map(e=>(0,a.jsx)(c.l,{listing:e},e.id))}),0===s.length&&(0,a.jsx)("div",{className:"text-center py-12",children:(0,a.jsx)("p",{className:"text-gray-500",children:"No listings found in this category."})})]})}var h=r(3168),m=r(7168),u=r(8482);let g=(0,r(2085).F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),p=s.forwardRef((e,t)=>{let{className:r,variant:s,...i}=e;return(0,a.jsx)("div",{ref:t,role:"alert",className:(0,n.cn)(g({variant:s}),r),...i})});p.displayName="Alert",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("h5",{ref:t,className:(0,n.cn)("mb-1 font-medium leading-none tracking-tight",r),...s})}).displayName="AlertTitle";let x=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("text-sm [&_p]:leading-relaxed",r),...s})});function f(){let[e,t]=(0,s.useState)(!1),[r,i]=(0,s.useState)(!1),[l,n]=(0,s.useState)(null),o=async()=>{t(!0),n(null);try{let{error:e}=await h.N.rpc("exec_sql",{sql:"\n          CREATE TABLE IF NOT EXISTS listings (\n            id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n            title TEXT NOT NULL,\n            description TEXT,\n            price DECIMAL(10,2) NOT NULL,\n            category TEXT NOT NULL,\n            location TEXT DEFAULT 'Palo Alto, CA',\n            seller_email TEXT NOT NULL,\n            seller_name TEXT,\n            image_url TEXT,\n            created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n            updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n          );\n        "}),{error:t}=await h.N.rpc("exec_sql",{sql:"\n          CREATE TABLE IF NOT EXISTS messages (\n            id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n            listing_id UUID REFERENCES listings(id) ON DELETE CASCADE,\n            buyer_email TEXT NOT NULL,\n            buyer_name TEXT,\n            message TEXT NOT NULL,\n            created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n          );\n        "}),{error:r}=await h.N.from("listings").insert([{title:"iPhone 14 Pro",description:"Excellent condition iPhone 14 Pro with original box",price:899,category:"Electronics",seller_email:"seller1@example.com",seller_name:"John Doe",image_url:"/placeholder.svg?height=300&width=300"},{title:"Mountain Bike",description:"24 inch mountain bike, great for trails",price:299,category:"Sporting Goods",seller_email:"seller2@example.com",seller_name:"Jane Smith",image_url:"/placeholder.svg?height=300&width=300"},{title:"Gaming Laptop",description:"High-performance gaming laptop with RTX 4070",price:1299,category:"Electronics",seller_email:"seller3@example.com",seller_name:"Mike Johnson",image_url:"/placeholder.svg?height=300&width=300"}]);if(e||t||r)throw Error("Failed to set up database");i(!0)}catch(e){n(e instanceof Error?e.message:"Unknown error occurred")}finally{t(!1)}};return r?(0,a.jsx)(p,{className:"mb-6",children:(0,a.jsx)(x,{children:"Database setup completed successfully! Please refresh the page to see your listings."})}):(0,a.jsxs)(u.Zp,{className:"mb-6",children:[(0,a.jsx)(u.aR,{children:(0,a.jsx)(u.ZB,{children:"Database Setup Required"})}),(0,a.jsxs)(u.Wu,{children:[(0,a.jsx)("p",{className:"mb-4 text-gray-600",children:"It looks like your database tables haven't been created yet. Click the button below to set up the required tables and sample data."}),l&&(0,a.jsx)(p,{className:"mb-4",children:(0,a.jsxs)(x,{className:"text-red-600",children:["Error: ",l]})}),(0,a.jsx)(m.$,{onClick:o,disabled:e,children:e?"Setting up...":"Set Up Database"})]})]})}x.displayName="AlertDescription";var v=r(9375);function y(){let[e,t]=(0,s.useState)([]),[r,l]=(0,s.useState)(null),[n,c]=(0,s.useState)(!0),[m,u]=(0,s.useState)(!1);(0,s.useEffect)(()=>{g()},[]);let g=async()=>{try{let{data:e,error:r}=await h.N.from("listings").select("*").order("created_at",{ascending:!1});if(r){console.log("Using sample data:",r.message),t(v.L);return}t(e||v.L)}catch(e){console.error("Error fetching listings, using sample data:",e),t(v.L)}finally{c(!1)}};return n?(0,a.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,a.jsx)(i.Y,{}),(0,a.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})})]}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,a.jsx)(i.Y,{}),(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[m&&(0,a.jsx)(f,{}),(0,a.jsxs)("div",{className:"flex gap-6",children:[(0,a.jsx)(o,{selectedCategory:r,onCategoryChange:l}),(0,a.jsx)(d,{listings:e,selectedCategory:r})]})]})]})}},3156:(e,t,r)=>{"use strict";r.d(t,{l:()=>o});var a=r(5155),s=r(6766),i=r(6874),l=r.n(i),n=r(8482);function o(e){let{listing:t}=e;return new Date(t.created_at).toLocaleDateString(),(0,a.jsx)(l(),{href:"/listing/".concat(t.id),children:(0,a.jsx)(n.Zp,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:(0,a.jsxs)(n.Wu,{className:"p-0",children:[(0,a.jsx)("div",{className:"aspect-square relative",children:(0,a.jsx)(s.default,{src:t.image_url||"/placeholder.svg?height=300&width=300",alt:t.title,fill:!0,className:"object-cover rounded-t-lg"})}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("h3",{className:"font-semibold text-lg mb-1",children:["$",t.price.toLocaleString()]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:t.title}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:t.location})]})]})})})}},3168:(e,t,r)=>{"use strict";r.d(t,{N:()=>a});let a=(0,r(5647).UU)("https://emgudyxilflyykdhjhin.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVtZ3VkeXhpbGZseXlrZGhqaGluIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE1MjQ0MTYsImV4cCI6MjA2NzEwMDQxNn0.NlGROS4aMEr3OnfSOiux0uCeLRVxzsD_43sR7CRYO_4")},3291:(e,t,r)=>{"use strict";r.d(t,{R:()=>a});let a=["Electronics","Vehicles","Property Rentals","Apparel","Classifieds","Entertainment","Family","Free Stuff","Garden & Outdoor","Hobbies","Home Goods","Home Improvement","Home Sales","Musical Instruments","Office Supplies","Pet Supplies","Sporting Goods","Toys & Games"]},3861:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(9946).A)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]])},3999:(e,t,r)=>{"use strict";r.d(t,{cn:()=>i});var a=r(2596),s=r(9688);function i(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,a.$)(t))}},4616:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(9946).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},5968:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(9946).A)("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]])},6535:(e,t,r)=>{Promise.resolve().then(r.bind(r,3072))},6766:(e,t,r)=>{"use strict";r.d(t,{default:()=>s.a});var a=r(1469),s=r.n(a)},7168:(e,t,r)=>{"use strict";r.d(t,{$:()=>c});var a=r(5155),s=r(2115),i=r(9708),l=r(2085),n=r(3999);let o=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,t)=>{let{className:r,variant:s,size:l,asChild:c=!1,...d}=e,h=c?i.DX:"button";return(0,a.jsx)(h,{className:(0,n.cn)(o({variant:s,size:l,className:r})),ref:t,...d})});c.displayName="Button"},7924:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(9946).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},8482:(e,t,r)=>{"use strict";r.d(t,{Wu:()=>c,ZB:()=>o,Zp:()=>l,aR:()=>n});var a=r(5155),s=r(2115),i=r(3999);let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});l.displayName="Card";let n=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",r),...s})});n.displayName="CardHeader";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});o.displayName="CardTitle",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",r),...s})}).displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",r),...s})});c.displayName="CardContent",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",r),...s})}).displayName="CardFooter"},8883:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(9946).A)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},9375:(e,t,r)=>{"use strict";r.d(t,{L:()=>a});let a=[{id:"1",title:"iPhone 14 Pro",description:"Excellent condition iPhone 14 Pro with original box and all accessories. No scratches or damage.",price:899,category:"Electronics",location:"Palo Alto, CA",seller_email:"seller1@example.com",seller_name:"John Doe",image_url:"/placeholder.svg?height=300&width=300",created_at:new Date(Date.now()-36e5).toISOString(),updated_at:new Date(Date.now()-36e5).toISOString()},{id:"2",title:"Mountain Bike 24 inch",description:"Great condition mountain bike perfect for trails and city riding. Recently serviced.",price:299,category:"Sporting Goods",location:"Palo Alto, CA",seller_email:"seller2@example.com",seller_name:"Jane Smith",image_url:"/placeholder.svg?height=300&width=300",created_at:new Date(Date.now()-72e5).toISOString(),updated_at:new Date(Date.now()-72e5).toISOString()},{id:"3",title:"Gaming Laptop RTX 4070",description:"High-performance gaming laptop with RTX 4070 graphics card. Perfect for gaming and work.",price:1299,category:"Electronics",location:"Palo Alto, CA",seller_email:"seller3@example.com",seller_name:"Mike Johnson",image_url:"/placeholder.svg?height=300&width=300",created_at:new Date(Date.now()-108e5).toISOString(),updated_at:new Date(Date.now()-108e5).toISOString()},{id:"4",title:"Dining Table Set",description:"Beautiful solid wood dining table with 6 chairs. Perfect for family dinners.",price:450,category:"Home Goods",location:"Palo Alto, CA",seller_email:"seller4@example.com",seller_name:"Sarah Wilson",image_url:"/placeholder.svg?height=300&width=300",created_at:new Date(Date.now()-144e5).toISOString(),updated_at:new Date(Date.now()-144e5).toISOString()},{id:"5",title:"Toyota Camry 2020",description:"Well maintained sedan with low mileage. Clean title, no accidents.",price:18500,category:"Vehicles",location:"Palo Alto, CA",seller_email:"seller5@example.com",seller_name:"David Brown",image_url:"/placeholder.svg?height=300&width=300",created_at:new Date(Date.now()-18e6).toISOString(),updated_at:new Date(Date.now()-18e6).toISOString()}]},9464:(e,t,r)=>{"use strict";r.d(t,{Y:()=>u});var a=r(5155),s=r(6874),i=r.n(s),l=r(7168),n=r(7924),o=r(5968),c=r(8883),d=r(3861),h=r(1007),m=r(4616);function u(){return(0,a.jsx)("header",{className:"border-b bg-white",children:(0,a.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(i(),{href:"/",className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white font-bold text-lg",children:"F"})}),(0,a.jsx)("h1",{className:"text-xl font-bold",children:"Marketplace"})]}),(0,a.jsxs)("nav",{className:"hidden md:flex items-center gap-6",children:[(0,a.jsx)(i(),{href:"/search",className:"text-gray-600 hover:text-gray-900",children:"Browse"}),(0,a.jsx)(i(),{href:"/my-listings",className:"text-gray-600 hover:text-gray-900",children:"My Listings"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(l.$,{variant:"ghost",size:"icon",asChild:!0,children:(0,a.jsx)(i(),{href:"/search",children:(0,a.jsx)(n.A,{className:"h-5 w-5"})})}),(0,a.jsx)(l.$,{variant:"ghost",size:"icon",asChild:!0,children:(0,a.jsx)(i(),{href:"/my-listings",children:(0,a.jsx)(o.A,{className:"h-5 w-5"})})}),(0,a.jsx)(l.$,{variant:"ghost",size:"icon",children:(0,a.jsx)(c.A,{className:"h-5 w-5"})}),(0,a.jsx)(l.$,{variant:"ghost",size:"icon",children:(0,a.jsx)(d.A,{className:"h-5 w-5"})}),(0,a.jsx)(l.$,{variant:"ghost",size:"icon",children:(0,a.jsx)(h.A,{className:"h-5 w-5"})}),(0,a.jsx)(l.$,{asChild:!0,children:(0,a.jsxs)(i(),{href:"/create",children:[(0,a.jsx)(m.A,{className:"h-4 w-4 mr-2"}),"Create Listing"]})})]})]})})})}},9946:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(2115);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:s=24,strokeWidth:n=2,absoluteStrokeWidth:o,className:c="",children:d,iconNode:h,...m}=e;return(0,a.createElement)("svg",{ref:t,...l,width:s,height:s,stroke:r,strokeWidth:o?24*Number(n)/Number(s):n,className:i("lucide",c),...m},[...h.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(d)?d:[d]])}),o=(e,t)=>{let r=(0,a.forwardRef)((r,l)=>{let{className:o,...c}=r;return(0,a.createElement)(n,{ref:l,iconNode:t,className:i("lucide-".concat(s(e)),o),...c})});return r.displayName="".concat(e),r}}},e=>{var t=t=>e(e.s=t);e.O(0,[309,63,441,684,358],()=>t(6535)),_N_E=e.O()}]);